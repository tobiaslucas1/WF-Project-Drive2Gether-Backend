generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:Atlet13k!@localhost:3306/drive2gether"
}

model User {
  ID             Int      @id @default(autoincrement())
  FirstName      String
  LastName       String
  Age            Int
  PhoneNumber    String   @unique
  Email          String   @unique
  Address        String
  Picture        String?
  Password       String
  Role           Role

  car            Car[]
  tripPassenger  TripPassenger[]
}

model Car {
  ID                 Int      @id @default(autoincrement())
  Model              String?
  Brand              String?
  LicensePlate       String   @unique
  Color              String?
  DriverLicenseImage String?
  IdentityCardImage  String?
  DriverID           Int

  user User @relation(fields: [DriverID], references: [ID])
  trip Trip[]
}

model Trip {
  ID             Int      @id @default(autoincrement())
  DeparturePlace String
  DepartureTime  DateTime
  ArrivalPlace   String
  Price          Decimal?
  PaymentMethod  PaymentMethod
  CarID          Int

  car            Car @relation(fields: [CarID], references: [ID])
  tripPassenger  TripPassenger[]
}

model TripPassenger {
  TripID      Int
  PassengerID Int
  Status      BookingStatus

  trip        Trip @relation(fields: [TripID], references: [ID])
  user        User @relation(fields: [PassengerID], references: [ID])

  @@id([TripID, PassengerID])
}

enum Role {
  Driver
  Passenger
  Both
}

enum PaymentMethod {
  Cash
  Card
  Online
}

enum BookingStatus {
  Pending
  Confirmed
  Cancelled
}
